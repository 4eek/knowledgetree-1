(function(){function y(){this.returnValue=false}function z(){this.cancelBubble=true}var A=0,r=[],v={},w={},x={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},B=/[<>&\"\']/g;(function(a){a=a.split(/,/);var b,f,e;for(b=0;b<a.length;b+=2){e=a[b+1].split(/ /);for(f=0;f<e.length;f++)w[e[f]]=a[b]}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats,docx pptx xlsx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/x-flv,flv,video/vnd.rn-realvideo,rv,text/plain,asc txt text diff log,application/octet-stream,exe");
var d={STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-700,mimeTypes:w,extend:function(a){d.each(arguments,function(b,f){f>0&&d.each(b,function(e,i){a[i]=e})});return a},cleanName:function(a){var b,f;f=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",
/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(b=0;b<f.length;b+=2)a=a.replace(f[b],f[b+1]);a=a.replace(/\s+/g,"_");return a=a.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(a,b){b.name=a;r[a]=b;r.push(b);return b},guid:function(){var a=(new Date).getTime().toString(32),b;for(b=0;b<5;b++)a+=Math.floor(Math.random()*65535).toString(32);return(d.guidPrefix||"p")+a+(A++).toString(32)},buildUrl:function(a,b){var f="";d.each(b,function(e,i){f+=(f?"&":"")+encodeURIComponent(i)+
"="+encodeURIComponent(e)});if(f)a+=(a.indexOf("?")>0?"&":"?")+f;return a},each:function(a,b){var f,e;if(a){f=a.length;if(f===void 0)for(e in a){if(a.hasOwnProperty(e))if(b(a[e],e)===false)break}else for(e=0;e<f;e++)if(b(a[e],e)===false)break}},formatSize:function(a){if(a===void 0)return d.translate("N/A");if(a>1048576)return Math.round(a/1048576,1)+" MB";if(a>1024)return Math.round(a/1024,1)+" KB";return a+" b"},getPos:function(a,b){function f(q){var g,c=0;g=0;if(q){g=q.getBoundingClientRect();q=
p.compatMode==="CSS1Compat"?p.documentElement:p.body;c=g.left+q.scrollLeft;g=g.top+q.scrollTop}return{x:c,y:g}}var e=0,i=0,h,p=document;b=b||p.body;if(a.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&p.documentMode!==8){e=f(a);i=f(b);return{x:e.x-i.x,y:e.y-i.y}}for(h=a;h&&h!=b&&h.nodeType;){e+=h.offsetLeft||0;i+=h.offsetTop||0;h=h.offsetParent}for(h=a.parentNode;h&&h!=b&&h.nodeType;){e-=h.scrollLeft||0;i-=h.scrollTop||0;h=h.parentNode}return{x:e,y:i}},getSize:function(a){return{w:a.clientWidth||
a.offsetWidth,h:a.clientHeight||a.offsetHeight}},parseSize:function(a){var b;if(typeof a=="string"){a=/^([0-9]+)([mgk]+)$/.exec(a.toLowerCase().replace(/[^0-9mkg]/g,""));b=a[2];a=+a[1];if(b=="g")a*=1073741824;if(b=="m")a*=1048576;if(b=="k")a*=1024}return a},xmlEncode:function(a){return a?(""+a).replace(B,function(b){return x[b]?"&"+x[b]+";":b}):a},toArray:function(a){var b,f=[];for(b=0;b<a.length;b++)f[b]=a[b];return f},addI18n:function(a){return d.extend(v,a)},translate:function(a){return v[a]||
a},addEvent:function(a,b,f){if(a.attachEvent)a.attachEvent("on"+b,function(){var e=window.event;if(!e.target)e.target=e.srcElement;e.preventDefault=y;e.stopPropagation=z;f(e)});else a.addEventListener&&a.addEventListener(b,f,false)}};d.Uploader=function(a){function b(){var g;if(this.state==d.STARTED&&p<h.length){g=h[p++];g.status==d.QUEUED?this.trigger("UploadFile",g):b.call(this)}else this.stop()}function f(){var g,c;i.reset();for(g=0;g<h.length;g++){c=h[g];if(c.size!==void 0){i.size+=c.size;i.loaded+=
c.loaded}else i.size=void 0;if(c.status==d.DONE)i.uploaded++;else if(c.status==d.FAILED)i.failed++;else i.queued++}if(i.size===void 0)i.percent=h.length>0?Math.ceil(i.uploaded/h.length*100):0;else{i.bytesPerSec=Math.ceil(i.loaded/((+new Date-q||1)/1E3));i.percent=i.size>0?Math.ceil(i.loaded/i.size*100):0}}var e={},i,h=[],p,q;i=new d.QueueProgress;a=d.extend({chunk_size:0,max_file_size:"1gb",multi_selection:true,file_data_name:"file",filters:[]},a);d.extend(this,{state:d.STOPPED,features:{},files:h,
settings:a,total:i,id:d.guid(),init:function(){function g(){var n=l[C++],j,o,m;if(n){j=n.getFeatures();if(o=c.settings.required_features){o=o.split(",");for(m=0;m<o.length;m++)if(!j[o[m]]){g();return}}n.init(c,function(s){if(s&&s.success){c.features=j;c.trigger("Init",{runtime:n.name});c.trigger("PostInit");c.refresh()}else g()})}else c.trigger("Error",{code:d.INIT_ERROR,message:"Init error."})}var c=this,k,l,C=0,t;a.page_url=a.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(a.url))a.url=
a.page_url+a.url;a.chunk_size=d.parseSize(a.chunk_size);a.max_file_size=d.parseSize(a.max_file_size);c.bind("FilesAdded",function(n,j){var o,m,s=0,u;if((o=a.filters)&&o.length){u={};d.each(o,function(D){d.each(D.extensions.split(/,/),function(E){u[E.toLowerCase()]=true})})}for(o=0;o<j.length;o++){m=j[o];m.loaded=0;m.percent=0;m.status=d.QUEUED;if(u&&!u[m.name.toLowerCase().split(".").slice(-1)])n.trigger("Error",{code:d.FILE_EXTENSION_ERROR,message:"File extension error.",file:m});else if(m.size!==
void 0&&m.size>a.max_file_size)n.trigger("Error",{code:d.FILE_SIZE_ERROR,message:"File size error.",file:m});else{h.push(m);s++}}if(s){c.trigger("QueueChanged");c.refresh()}});a.unique_names&&c.bind("UploadFile",function(n,j){j.target_name=j.id+".tmp"});c.bind("UploadProgress",function(n,j){if(j.status==d.QUEUED)j.status=d.UPLOADING;j.percent=j.size>0?Math.ceil(j.loaded/j.size*100):100;f()});c.bind("StateChanged",function(n){if(n.state==d.STARTED)q=+new Date});c.bind("QueueChanged",f);c.bind("Error",
function(n,j){if(j.file){j.file.status=d.FAILED;f();window.setTimeout(function(){b.call(c)})}});c.bind("FileUploaded",function(n,j){j.status=d.DONE;n.trigger("UploadProgress",j);b.call(c)});if(a.runtimes){l=[];t=a.runtimes.split(/\s?,\s?/);for(k=0;k<t.length;k++)r[t[k]]&&l.push(r[t[k]])}else l=r;g()},refresh:function(){this.trigger("Refresh")},start:function(){if(this.state!=d.STARTED){p=0;this.state=d.STARTED;this.trigger("StateChanged");b.call(this)}},stop:function(){if(this.state!=d.STOPPED){this.state=
d.STOPPED;this.trigger("StateChanged")}},getFile:function(g){var c;for(c=h.length-1;c>=0;c--)if(h[c].id===g)return h[c]},removeFile:function(g){var c;for(c=h.length-1;c>=0;c--)if(h[c].id===g.id)return this.splice(c,1)[0]},splice:function(g,c){var k;k=h.splice(g,c);this.trigger("FilesRemoved",k);this.trigger("QueueChanged");return k},trigger:function(g){var c=e[g.toLowerCase()],k,l;if(c){l=Array.prototype.slice.call(arguments);l[0]=this;for(k=0;k<c.length;k++)if(c[k].func.apply(c[k].scope,l)===false)return false}return true},
bind:function(g,c,k){var l;g=g.toLowerCase();l=e[g]||[];l.push({func:c,scope:k||this});e[g]=l},unbind:function(g,c){var k=e[g.toLowerCase()],l;if(k)for(l=k.length-1;l>=0;l--)k[l].func===c&&k.splice(l,1)}})};d.File=function(a,b,f){this.id=a;this.name=b;this.size=f;this.status=this.percent=this.loaded=0};d.Runtime=function(){this.getFeatures=function(){};this.init=function(){}};d.QueueProgress=function(){var a=this;a.size=0;a.loaded=0;a.uploaded=0;a.failed=0;a.queued=0;a.percent=0;a.bytesPerSec=0;a.reset=
function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}};d.runtimes={};window.plupload=d})();
