if(typeof kt.app=="undefined")kt.app={};if(typeof kt.api=="undefined")kt.api={};
kt.app.inviteusers=new function(){var f=this.fragmentPackage=[this.fragments=[]],g=this.execPackage=[this.execs=["users/invite.dialog","users/invite.confirm.dialog"]],b=this;this.elems={};this.init=function(){kt.api.preload(f,g,true)};this.inviteWindow=null;this.inviteUsers=function(){emails=document.getElementById("invite.emails").value;if(emails.length<3)alert("Please enter a valid email address.");else{group=document.getElementById("invite.grouplist").value;kt.api.inviteUsers(emails,group,"invited",
null,b.inviteCallback,function(){})}b.disableInviteButton()};this.inviteCallback=function(c){var a=jQuery.parseJSON(c.data.invitedUsers);c=a.invited;var h=a.check,d=a.existing;a=a.failed;var e=new Ext.Window({id:"extinviteconfirmwindow",layout:"fit",width:400,resizable:false,closable:true,closeAction:"destroy",y:50,autoScroll:false,bodyCssClass:"ul_win_body",cls:"ul_win",shadow:true,modal:true,title:"User Invitations Sent",html:kt.api.execFragment("users/invite.confirm.dialog")});b.closeWindow();
b.inviteConfirmWin=e;e.show();document.getElementById("invitedUsers").innerHTML=c;if(d=="")document.getElementById("showExistingUsers").style.display="none";else{document.getElementById("existingUsers").innerHTML=d;document.getElementById("showExistingUsers").style.display="block"}if(a=="")document.getElementById("showFailedUsers").style.display="none";else{document.getElementById("failedUsers").innerHTML=a;document.getElementById("showFailedUsers").style.display="block"}if(h!=0)document.getElementById("inviteLicenses").style.display=
"block"};this.enableInviteButton=function(){jQuery("#invite_actions_invite_btn").removeAttr("disabled")};this.disableInviteButton=function(){jQuery("#invite_actions_invite_btn").attr("disabled","true")};this.showInviteWindow=function(){var c=new Ext.Window({id:"extinvitewindow",layout:"fit",width:500,resizable:false,closable:true,closeAction:"destroy",y:50,autoScroll:false,bodyCssClass:"ul_win_body",cls:"ul_win",shadow:true,modal:true,title:"Invite Users",html:kt.api.execFragment("users/invite.dialog")});
b.inviteWindow=c;c.show();b.disableInviteButton()};this.closeWindow=function(){inviteWindow=Ext.getCmp("extinvitewindow");inviteWindow.destroy()};this.closeConfirmWindow=function(){inviteConfirmWin=Ext.getCmp("extinviteconfirmwindow");inviteConfirmWin.destroy()};this.init()};
